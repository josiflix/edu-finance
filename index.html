<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>EduFinance MD3</title>
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <nav class="navigation-bar">
    <button class="nav-item active" onclick="navTo('home')">
      <div class="nav-icon-container">
        <span class="material-symbols-rounded">account_balance_wallet</span>
      </div>
      <span class="nav-label">Resumen</span>
    </button>
    <button class="nav-item" onclick="navTo('analysis')">
      <div class="nav-icon-container">
        <span class="material-symbols-rounded">monitoring</span>
      </div>
      <span class="nav-label">Análisis</span>
    </button>
  </nav>

  <main>
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:24px;">
      <span style="font-size:22px;">EduFinance</span>
      <select id="monthSelector" class="text-field" style="width:auto; margin:0; padding:8px 16px; border-radius:20px;"></select>
    </div>

    <div id="view-home">
      <div class="card">
        <div class="card-title">Disponible Estimado</div>
        <div class="display-large" id="txtNet">...</div>
        <div style="display:flex; gap:24px; margin-top:24px;">
          <div>
            <div class="card-title" style="margin:0">Ingresos</div>
            <div style="font-size:18px; color:var(--md-sys-color-tertiary);" id="txtIn">...</div>
          </div>
          <div>
            <div class="card-title" style="margin:0">Gastos</div>
            <div style="font-size:18px; color:var(--md-sys-color-error);" id="txtOut">...</div>
          </div>
        </div>
      </div>

      <div class="card-title" style="margin-left:8px;">Últimos Movimientos</div>
      <div id="listTx"></div>
      <div style="height:100px"></div>
    </div>

    <div id="view-analysis" class="hidden">
      <div class="card">
        <div class="card-title">Progreso Objetivo</div>
        <div class="display-large" id="txtGoalPercent">0%</div>
        <div class="bar-container" style="margin-top:16px;">
          <div class="track"><div id="barGoal" class="fill" style="width:0%"></div></div>
        </div>
        <div class="card-title" id="txtGoalDetail">Meta: --</div>
      </div>

      <div class="card-title" style="margin-left:8px;">Gastos por Categoría</div>
      <div id="listCats"></div>
      <div style="height:100px"></div>
    </div>
  </main>

  <button class="fab" onclick="openModal()">
    <span class="material-symbols-rounded">add</span>
  </button>

  <div id="dialog" class="dialog-overlay" onclick="if(event.target===this) closeModal()">
    <div class="dialog">
      <h2 style="margin:0 0 24px 0;" id="modalTitle">Nuevo Movimiento</h2>
      <input type="hidden" id="inpId">
      
      <div style="display:flex; gap:16px;">
        <input type="number" id="inpAmt" class="text-field" placeholder="0.00" style="font-size:24px;">
        <select id="inpType" class="text-field" style="width:120px;">
          <option>Gasto</option>
          <option>Ingreso</option>
        </select>
      </div>

      <select id="inpCat" class="text-field"><option>Cargando...</option></select>
      <input type="text" id="inpNote" class="text-field" placeholder="Nota">
      <input type="date" id="inpDate" class="text-field">

      <div style="margin-top:auto; display:flex; flex-direction:column; gap:8px;">
        <button class="btn btn-filled" onclick="save()">Guardar</button>
        <button class="btn btn-tonal" id="btnDel" onclick="del()" style="display:none; background:var(--md-sys-color-error); color:black;">Eliminar</button>
        <button class="btn btn-text" onclick="closeModal()">Cancelar</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
